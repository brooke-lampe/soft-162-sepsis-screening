ScreenManager:
    Screen:
        name: 'log_in'
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'OpenMRS Patient Information App'
                font_size: '30sp'
                color: (0.6, 0.1, 0.9)
            Label:
                text: 'Login Screen'
                font_size: '24sp'
                color: (1, 0, 0)
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: 'authority:'
                    font_size: '24sp'
                    size_hint: 0.5, 1
                    color: (0.6, 0.1, 0.9)
                TextInput:
                    id: authority
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    text: 'localhost'
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: 'port number:'
                    font_size: '24sp'
                    size_hint: 0.5, 1
                    color: (0.6, 0.1, 0.9)
                TextInput:
                    id: port_number
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    text: '8080'
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: 'username:'
                    font_size: '24sp'
                    size_hint: 0.5, 1
                    color: (0.6, 0.1, 0.9)
                TextInput:
                    id: username
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    text: 'admin'
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: 'password:'
                    font_size: '24sp'
                    size_hint: 0.5, 1
                    color: (0.6, 0.1, 0.9)
                TextInput:
                    id: password
                    password: True
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    text: 'Admin123'
            BoxLayout:
                orientation: 'vertical'
                Label:
                Label:
                    id: session
                    font_size: '24sp'
                    text: ''
                Label:
                    id: session2
                    font_size: '24sp'
                    text: ''
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    size_hint: 0.5, 0.5
                Button:
                    text: 'Log In'
                    size_hint: 0.5, 0.5
                    on_press:
                        root.transition.direction = 'left'
                        app.connect()
                        app.load_session()
    Screen:
        name: 'selection'
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'OpenMRS Patient Information App'
                font_size: '30sp'
                color: (0.6, 0.1, 0.9)
            Label:
                text: 'Patient Selection Screen'
                font_size: '24sp'
                color: (1, 0, 0)
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    text: 'OpenMRS ID:'
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    color: (0.6, 0.1, 0.9)
                TextInput:
                    id: openmrs_id
                    size_hint: 0.5, 1
                    font_size: '24sp'
                    text: ''
            Label:
                size_hint: 0.5, 0.5
            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: retrieve
                    font_size: '24sp'
                    text: ''
                Label:
                    id: retrieve2
                    font_size: '24sp'
                    text: ''
            BoxLayout:
                orientation: 'horizontal'
                Button:
                    text: 'Log Out'
                    size_hint: 0.5, 0.5
                    on_press:
                        root.ids.password.text = ''
                        root.ids.session.text = ''
                        root.ids.session2.text = ''
                        root.ids.openmrs_id.text = ''
                        root.transition.direction = 'right'
                        root.current = 'log_in'
                        app.connect()
                Button:
                    text: 'Select Patient'
                    size_hint: 0.5, 0.5
                    on_press:
                        root.transition.direction = 'left'
                        app.load_patient()
    Screen:
        name: 'medication'
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'OpenMRS Patient Information App'
                font_size: '30sp'
                color: (0.6, 0.1, 0.9)
            Label:
                text: 'Medications Screen'
                font_size: '24sp'
                color: (1, 0, 0)
            BoxLayout:
                orientation: 'vertical'
                id: medication_layout
            BoxLayout:
                Widget:
                    size_hint: (.1, 1)
                BoxLayout:
                    orientation: 'vertical'
                    BoxLayout:
                        orientation: 'horizontal'
                        Label:
                            text: 'heparin:'
                            text_size: self.size
                        TextInput:
                            id: heparin_id
                            hint_text: 'Enter taking date to (YYYY-MM-DD)'
                            text: ''
                            multiline: False
                            font_size: '12sp'
                    BoxLayout:
                        orientation: 'horizontal'
                        Label:
                            text: 'colonyFactor:'
                            text_size: self.size
                        TextInput:
                            id: colonyFactor_id
                            hint_text: 'Enter taking date to (YYYY-MM-DD)'
                            multiline: False
                            text: ''
                            font_size: '12sp'
                    BoxLayout:
                        orientation: 'horizontal'
                        Label:
                            text: 'eythropoitiens:'
                            text_size: self.size
                        TextInput:
                            id: eythropoitiens_id
                            hint_text: 'Enter taking date to (YYYY-MM-DD)'
                            multiline: False
                            text: ''
                            font_size: '12sp'
                    BoxLayout:
                        Label:
                            id: error_log
                            text: str(app.message)

                Widget:
                    size_hint: (.1, 1)
                    size_hint: (.1, 1)
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Button:
                        text: 'Log Out'
                        on_press:
                            root.ids.password.text = ''
                            root.ids.session.text = ''
                            root.ids.session2.text = ''
                            root.ids.openmrs_id.text = ''
                            root.ids.retrieve.text = ''
                            root.ids.retrieve2.text = ''
                            root.transition.direction = 'right'
                            root.current = 'log_in'
                            app.connect()
                    Button:
                        text: 'Return to Patient Selection Screen'
                        on_press:
                            root.ids.retrieve.text = ''
                            root.ids.retrieve2.text = ''
                            root.transition.direction = 'right'
                            root.current = 'selection'
                Button:
                    text: 'Confirm Medications'
                    on_press:
                        root.transition.direction = 'left'
                        app.check_heparin()
                        app.CheckColonyFactor()
                        app.check_erythropoietin()
                        app.retrieve()
    Screen:
        name: 'determination'
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, None
                height: 1150
                Label:
                    text: 'OpenMRS Patient Information App'
                    font_size: '30sp'
                    color: (0.6, 0.1, 0.9)
                    size_hint: 1, None
                    height: 75
                Label:
                    text: 'Determination Screen'
                    font_size: '24sp'
                    color: (1, 0, 0)
                    size_hint: 1, None
                    height: 50
                Label:
                    id: patient_info
                    font_size: '20sp'
                    color: (0.6, 0.1, 0.9)
                    size_hint: 1, None
                    height: 25
                Label:
                    id: determination_timestamp
                    font_size: '20sp'
                    color: (0.6, 0.1, 0.9)
                    size_hint: 1, None
                    height: 25
                Label:
                    id: determination_summary
                    font_size: '30sp'
                    color: (0.99, 0.3, 0)
                    size_hint: 1, None
                    height: 75
                Label:
                    text: 'SIRS Criteria Met'
                    font_size: '20sp'
                    color: (1, 0, 0)
                    size_hint: 1, None
                    height: 40
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, None
                    height: 200
                    BoxLayout:
                        orientation: 'vertical'
                        id: SIRS_criteria
                    BoxLayout:
                        orientation: 'vertical'
                        id: SIRS_reason
                Label:
                    text: 'Organ Dysfunction Criteria Met'
                    font_size: '20sp'
                    color: (1, 0, 0)
                    size_hint: 1, None
                    height: 40
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, None
                    height: 200
                    BoxLayout:
                        orientation: 'vertical'
                        id: organ_criteria
                    BoxLayout:
                        orientation: 'vertical'
                        id: organ_reason
                Label:
                    id: treatment
                    font_size: '30sp'
                    color: (0.99, 0.3, 0)
                    size_hint: 1, None
                    height: 50
                Label:
                    text: 'Suggested Labs:'
                    font_size: '20sp'
                    color: (1, 0, 0)
                    size_hint: 1, None
                    height: 40
                BoxLayout:
                    orientation: 'vertical'
                    id: suggested_layout
                    size_hint: 1, None
                    height: 200
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, None
                    height: 100
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint: 1, None
                        height: 50
                        Button:
                            size_hint: 1, None
                            height: 50
                            text: 'Log Out'
                            on_press:
                                root.ids.password.text = ''
                                root.ids.session.text = ''
                                root.ids.session2.text = ''
                                root.ids.openmrs_id.text = ''
                                root.ids.retrieve.text = ''
                                root.ids.retrieve2.text = ''
                                root.transition.direction = 'right'
                                root.current = 'log_in'
                                app.connect()
                                app.clear()
                        Button:
                            size_hint: 1, None
                            height: 50
                            text: 'Return to Patient Selection Screen'
                            on_press:
                                root.ids.retrieve.text = ''
                                root.ids.retrieve2.text = ''
                                root.transition.direction = 'right'
                                root.current = 'selection'
                                app.clear()
                    Button:
                        size_hint: 1, None
                        height: 100
                        text: 'Return to Medications Screen'
                        on_press:
                            root.transition.direction = 'right'
                            root.current = 'medication'
                            app.clear()
